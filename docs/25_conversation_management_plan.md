# ä¼šè©±å±¥æ­´ç®¡ç†æ©Ÿèƒ½å®Ÿè£…è¨ˆç”»

## æ¦‚è¦
ä¼šè©±å±¥æ­´ã®ä¸€è¦§è¡¨ç¤ºãƒ»å‰Šé™¤æ©Ÿèƒ½ã‚’å°‚ç”¨ãƒšãƒ¼ã‚¸ã§æä¾›ã™ã‚‹ã€‚

## ç¾çŠ¶
- âœ… ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ä¼šè©±å±¥æ­´ä¸€è¦§ã‚’è¡¨ç¤º
- âœ… ä¼šè©±ã®é¸æŠãƒ»å¾©å…ƒæ©Ÿèƒ½
- âŒ ä¼šè©±ã®å‰Šé™¤æ©Ÿèƒ½ãªã—
- âŒ ä¼šè©±ç®¡ç†å°‚ç”¨ãƒšãƒ¼ã‚¸ãªã—

## UIè¨­è¨ˆ

### æ–°è¦ãƒšãƒ¼ã‚¸: `/conversations`ï¼ˆä¼šè©±å±¥æ­´ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¼šè©±å±¥æ­´ç®¡ç†                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  ä¼šè©±å±¥æ­´ (15ä»¶)                    [+ æ–°è¦ä¼šè©±]     â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“ KDDIã®æ¡ˆä»¶ã«ã¤ã„ã¦                       â”‚    â”‚
â”‚  â”‚    ç´„10æ™‚é–“å‰ â€¢ 5ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸        [ğŸ—‘ï¸å‰Šé™¤] â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“ ç§ã®æ‹…å½“æ¡ˆä»¶ã‚’æ•™ãˆã¦                     â”‚    â”‚
â”‚  â”‚    ç´„10æ™‚é–“å‰ â€¢ 8ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸        [ğŸ—‘ï¸å‰Šé™¤] â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“ æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹                             â”‚    â”‚
â”‚  â”‚    ç´„10æ™‚é–“å‰ â€¢ 3ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸        [ğŸ—‘ï¸å‰Šé™¤] â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚µã‚¤ãƒ‰ãƒãƒ¼æ›´æ–°
```
â”œâ”€ ãƒãƒ£ãƒƒãƒˆ
â”œâ”€ ãƒ‡ãƒ¼ã‚¿ç®¡ç†
â”œâ”€ ä¼šè©±å±¥æ­´ (æ–°è¦è¿½åŠ ) â† /conversations
```

## æ©Ÿèƒ½è¦ä»¶

### ä¼šè©±å±¥æ­´ä¸€è¦§ãƒšãƒ¼ã‚¸
1. **ä¸€è¦§è¡¨ç¤º**
   - ä¼šè©±ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæœ€åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰ç”Ÿæˆï¼‰
   - æœ€çµ‚æ›´æ–°æ—¥æ™‚ï¼ˆç›¸å¯¾æ™‚é–“ï¼‰
   - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä»¶æ•°
   - ã‚¯ãƒªãƒƒã‚¯ã§ãƒãƒ£ãƒƒãƒˆãƒšãƒ¼ã‚¸ã«é·ç§»ã—ã¦ä¼šè©±ã‚’é–‹ã

2. **å‰Šé™¤æ©Ÿèƒ½**
   - å„ä¼šè©±ã«ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³
   - ã‚¯ãƒªãƒƒã‚¯ã§ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
   - ç¢ºèªå¾Œã«å‰Šé™¤å®Ÿè¡Œ
   - å‰Šé™¤å¾Œã«ä¸€è¦§ã‚’å†å–å¾—

3. **æ–°è¦ä¼šè©±**
   - ã€Œæ–°è¦ä¼šè©±ã€ãƒœã‚¿ãƒ³ã§ãƒãƒ£ãƒƒãƒˆãƒšãƒ¼ã‚¸ã«é·ç§»

4. **æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**
   - ä¼šè©±ã‚¿ã‚¤ãƒˆãƒ«ã§ã®æ¤œç´¢
   - æ—¥ä»˜ç¯„å›²ã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

## æŠ€è¡“è¨­è¨ˆ

### Backend API

#### 1. å‰Šé™¤ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 
```python
@router.delete("/conversations/{conversation_id}")
async def delete_conversation(
    conversation_id: str,
    repo: ConversationRepository = Depends(get_conversation_repository),
):
    """ä¼šè©±ã‚’å‰Šé™¤"""
    await repo.delete_conversation(conversation_id)
    return {"message": "Conversation deleted successfully"}
```

#### 2. Repositoryè¿½åŠ ãƒ¡ã‚½ãƒƒãƒ‰
```python
async def delete_conversation(self, conversation_id: str) -> None:
    """ä¼šè©±ã‚’å‰Šé™¤ï¼ˆè«–ç†å‰Šé™¤ï¼‰"""
    container = cosmos_client.get_container("Conversations")

    # è«–ç†å‰Šé™¤: is_activeã‚’Falseã«
    conversation = container.read_item(
        item=conversation_id,
        partition_key=conversation_id
    )
    conversation["is_active"] = False
    container.upsert_item(conversation)
```

### Frontendå®Ÿè£…

#### 1. æ–°è¦ãƒšãƒ¼ã‚¸ä½œæˆ
- `frontend/src/app/conversations/page.tsx`

#### 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
- `frontend/src/components/conversation/ConversationCard.tsx`
  - ä¼šè©±ã‚«ãƒ¼ãƒ‰ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã€æ—¥æ™‚ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ã€å‰Šé™¤ãƒœã‚¿ãƒ³ï¼‰
- `frontend/src/components/conversation/DeleteConfirmDialog.tsx`
  - å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°

#### 3. APIé–¢æ•°è¿½åŠ 
```typescript
// lib/api.ts
export async function deleteConversation(conversationId: string): Promise<void> {
  const response = await fetch(`${API_BASE_URL}/api/v1/conversations/${conversationId}`, {
    method: 'DELETE',
  })
  if (!response.ok) {
    throw new Error('Failed to delete conversation')
  }
}
```

#### 4. Storeæ›´æ–°
```typescript
// store/conversationStore.ts
deleteConversation: async (conversationId: string) => {
  set({ isLoading: true })
  try {
    await deleteConversation(conversationId)
    // å‰Šé™¤å¾Œã«ãƒªã‚¹ãƒˆã‹ã‚‰é™¤å¤–
    set((state) => ({
      conversations: state.conversations.filter(c => c.id !== conversationId),
      isLoading: false,
    }))
  } catch (error) {
    set({ error: error.message, isLoading: false })
  }
}
```

#### 5. ã‚µã‚¤ãƒ‰ãƒãƒ¼æ›´æ–°
```typescript
// Sidebar.tsx
const menuItems = [
  { href: '/', icon: MessageSquare, label: 'ãƒãƒ£ãƒƒãƒˆ' },
  { href: '/conversations', icon: History, label: 'ä¼šè©±å±¥æ­´' },
  { href: '/data', icon: Database, label: 'ãƒ‡ãƒ¼ã‚¿ç®¡ç†' },
]
```

## å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: Backend APIå®Ÿè£…
- [ ] Repository: `delete_conversation`ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- [ ] Routes: DELETE `/conversations/{id}` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 
- [ ] ãƒ†ã‚¹ãƒˆ: curlã§å‰Šé™¤æ©Ÿèƒ½ç¢ºèª

### Phase 2: Frontend APIãƒ»Storeå®Ÿè£…
- [ ] lib/api.ts: `deleteConversation`é–¢æ•°è¿½åŠ 
- [ ] conversationStore.ts: `deleteConversation`ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 

### Phase 3: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] ConversationCard.tsxä½œæˆ
- [ ] DeleteConfirmDialog.tsxä½œæˆ
- [ ] conversations/page.tsxä½œæˆ

### Phase 4: ã‚µã‚¤ãƒ‰ãƒãƒ¼æ›´æ–°
- [ ] Sidebar.tsx: ä¼šè©±å±¥æ­´ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®è¿½åŠ 
- [ ] ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ ï¼ˆlucide-react: Historyï¼‰

### Phase 5: çµ±åˆãƒ†ã‚¹ãƒˆ
- [ ] ä¼šè©±ä¸€è¦§è¡¨ç¤ºã®ç¢ºèª
- [ ] å‰Šé™¤æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
- [ ] å‰Šé™¤å¾Œã®ä¸€è¦§æ›´æ–°ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèª

## ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### Backend
- å¤‰æ›´: `backend/app/repositories/conversation.py`
- å¤‰æ›´: `backend/app/api/routes.py`

### Frontend
- æ–°è¦: `frontend/src/app/conversations/page.tsx`
- æ–°è¦: `frontend/src/components/conversation/ConversationCard.tsx`
- æ–°è¦: `frontend/src/components/conversation/DeleteConfirmDialog.tsx`
- å¤‰æ›´: `frontend/src/lib/api.ts`
- å¤‰æ›´: `frontend/src/store/conversationStore.ts`
- å¤‰æ›´: `frontend/src/components/layout/Sidebar.tsx`

## UXè€ƒæ…®äº‹é …

### å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¼šè©±ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ            â”‚
â”‚                                 â”‚
â”‚  ã€ŒKDDIã®æ¡ˆä»¶ã«ã¤ã„ã¦ã€          â”‚
â”‚                                 â”‚
â”‚  ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚      â”‚
â”‚                                 â”‚
â”‚  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [å‰Šé™¤ã™ã‚‹]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- å‰Šé™¤å¤±æ•—æ™‚: ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ã§ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼: ãƒªãƒˆãƒ©ã‚¤ææ¡ˆ

### ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
- å‰Šé™¤ä¸­: ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ– + ã‚¹ãƒ”ãƒŠãƒ¼è¡¨ç¤º
- ä¸€è¦§å–å¾—ä¸­: ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

## è¦‹ç©ã‚‚ã‚Š
- Phase 1: 30åˆ†
- Phase 2: 30åˆ†
- Phase 3: 2æ™‚é–“
- Phase 4: 15åˆ†
- Phase 5: 30åˆ†

**åˆè¨ˆ**: ç´„3.5æ™‚é–“

## å°†æ¥ã®æ‹¡å¼µæ©Ÿèƒ½ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] ä¼šè©±ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ©Ÿèƒ½
- [ ] ä¼šè©±ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆJSON/CSVï¼‰
- [ ] ä¼šè©±ã®æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- [ ] ä¸€æ‹¬å‰Šé™¤æ©Ÿèƒ½
- [ ] ä¼šè©±ã®ã‚¿ã‚°ä»˜ã‘æ©Ÿèƒ½
